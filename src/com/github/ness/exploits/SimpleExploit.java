package com.github.ness.exploits;

import org.bukkit.Material;
import org.bukkit.enchantments.Enchantment;
import org.bukkit.entity.Player;
import org.bukkit.event.player.PlayerEditBookEvent;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.BookMeta;

import com.github.ness.NESS;
import com.github.ness.WarnHacks;

public class SimpleExploit {

	@SuppressWarnings("deprecation")
	public static void Check(PlayerInteractEvent event) {
		Player p = event.getPlayer();
	    ItemStack is = p.getItemInHand();
	    if (is == null)
	      return;  if (is.getType() != Material.BOOK_AND_QUILL && is.getType() != Material.WRITTEN_BOOK)
	      return;  if (is.getEnchantments().size() > 0) {
	      for (Enchantment enchantment : is.getEnchantments().keySet())
	        is.removeEnchantment(enchantment); 
	      event.setCancelled(true);
	      p.getInventory().removeItem(new ItemStack[] { is });
	      WarnHacks.warnHacks(p, "Exploits", 10, -1.0D, 3, "Book and Quill Exploit", false);
	    } 
	}

	public static void Check1(PlayerEditBookEvent event) {
		BookMeta book = event.getNewBookMeta();
	    if (book.getEnchants().size() > 0) {
	      event.setCancelled(true);
	      event.getPlayer().getInventory().remove(Material.BOOK_AND_QUILL);
	      WarnHacks.warnHacks(event.getPlayer(), "Exploits", 10, -1.0D, 3, "Book and Quill Exploit", false);
	    }	
	}
	
	public static void Check2(PlayerJoinEvent event) {
		boolean enabled = NESS.main.config.getBoolean("Settings.AntiVape");
		if(enabled) {
			return;
		}
		String msg = "à§8 à§8 à§1 à§3 à§3 à§7 à§8 ";
	    event.getPlayer().sendMessage(msg);
	}

}
